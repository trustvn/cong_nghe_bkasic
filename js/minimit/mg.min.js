/*
 Copyright (C) 2013-2014 by Riccardo Caroli
 @version   Minimit Gallery v2.1.2
 @link      http://github.com/minimit/minimit-gallery
 @author    Riccardo Caroli http://www.minimit.com
 @license   Licensed under the MIT license http://www.opensource.org/licenses/mit-license.php
*/
function Mg(a){this.events=[];this.setSettings(a)}
Mg.prototype.setSettings=function(a){for(var c in a)if("object"!=typeof a[c]||a[c].length)this[c]=a[c];else{if(void 0==this[c]){var b=this[c]={};this.events.push(c);b.obj=this;b.evnt=c;a.reference&&(b.reference=a.reference);b.inverse=!1;b.anchorize=!1;b.linkedMultiply=b.prevSteps=b.nextSteps=1;b.multiMode="centered";b.multiLimit=!0;b.fixedLess=b.fixedPlus=0;b.scrollIsVertical=b.dragIsVertical=b.scrollInvert=b.dragInvert=b.scrollFraction=b.dragFraction=b.scrollWheel=b.dragWheel=!1;b.scrollFriction=
0;b.dragFriction=0.85;b.scrollPower=b.dragPower=0.6;b.scrollFurther=0;b.dragFurther=0.2;b.scrollCursorOff="url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), pointer";b.scrollCursorOn="url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur), pointer";b.dragCursorOff="url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur), move";b.dragCursorOn="url(http://www.google.com/intl/en_ALL/mapfiles/closedhand.cur), move";b.rounding="round"}var b=this[c],e;for(e in a[c])b[e]=a[c][e];
void 0==b.cycle&&(b.cycle=!1);void 0==b.activated&&(b.activated=[]);1>b.activated.length&&b.activated.push(null);b.initNum=b.activated.slice();"onhashchange"in window&&(this.registerEvent(b,window.mg_AnchorEvntsArr,"useAnchor"),this.registerEvent(b,window.mg_HashEvntsArr,"useLinkHash"));window.history&&window.history.pushState&&this.registerEvent(b,window.mg_UrlEvntsArr,"useLinkUrl")}this.refreshItems();this.initScrollDrag()};
Mg.prototype.refreshItems=function(){this.items=this.getElementsById(this.reference+"-item-");0<this.items.length&&(this.totalItems=this.items.length);for(var a=this.totalItems-1,c=!1,b=0,e=this.events.length;b<e;b++){var d=this[this.events[b]];d.totalItems=this.totalItems;d.multiLimit&&d.multiLess+d.multiPlus+1>a&&(d.multiLess=Math.floor(a/2),d.multiPlus=Math.ceil(a/2));if("useLinkHash"==d.anchorize||"useLinkUrl"==d.anchorize)c=!0}if(c)for(this.itemsLink=[],b=0,e=this.items.length;b<e;b++)a=this.getElementsById(this.reference+
"-item-"+b)[0],this.itemsLink.push({href:a.getAttribute("href"),title:a.getAttribute("data-title")});this.initEvents()};
Mg.prototype.init=function(a){this.inited&&(a="reinit");for(var c=0,b=this.events.length;c<b;c++){var e=this.events[c],d=this[e];d.noCheck=void 0!=d.prevHide||void 0!=d.prevShow||void 0!=d.nextHide||void 0!=d.nextShow?!1:!0;if(this.inited)for(var f=0,h=d.activatedInit.length;f<h;f++)this.setState(d.activatedInit[f],e,!1,!0,!0,!1,a||"init");else for(d.activatedInit=[],f=0,h=d.activated.length;f<h;f++)d.activatedInit[f]=d.activated[f],this.setState(d.activated[f],e,!1,!0,!0,!1,a||"init");void 0!=d.auto&&
this.autoStart(e)}this.inited=!0};
Mg.prototype.setState=function(a,c,b,e,d,f,h){var g=this[c];g.eventType=h;g.oldNum=g.num;g.oldActivated=g.activated;if(a!=g.oldNum||"reinit"==h||g.deactivable||void 0==g.num||g.scrollFraction||g.dragFraction){if(g.anchorize&&"reset"!=h&&"anchor"!=h){var k=this.makeAnchor(a,c,h);void 0!=k&&(a=parseFloat(k),b=!0)}g.num=a;"init"!=h||void 0!=k?g.deactivated=this.setActivated(a,c):null==g.activated[0]&&g.activated.splice(0,1);0<g.multiPlus+g.multiLess?this.setMultiple(c,h):(g.direction=null,"init"!=h&&
(k=this.findNormalDistance(g.num,g.oldNum),g.distance=k,g.direction=0<k?1:0));g.cycle||g.noCheck||this.checkPrevNext(c);if(!g.deactivable&&"click"==c&&g.interactive){for(var l=0,k=g.activated.length;l<k;l++)this.enableTextSelect(document.getElementById(this.reference+"-item-"+g.activated[l]),!0);void 0!=g.deactivated&&this.disableTextSelect(document.getElementById(this.reference+"-item-"+g.deactivated),!0)}f&&this.autoSlow(c);"fraction"!=h&&(g.fraction=this.calculateFraction(0,g.rounding));if(void 0!=
g.onEvent)g.onEvent();"linkedinit"!=h&&(c=g.scrollInDiv,e&&c&&this.scRelease(c,a),c=g.dragInDiv,d&&c&&"linkedinit"!=h&&this.scRelease(c,a));if(b)for(l in g.linked)g.linked[l].obj.setState(void 0!=a?a*g.linkedMultiply:a,g.linked[l].evnt,!1,!0,!0,!0,"linked"+h)}};
Mg.prototype.setActivated=function(a,c){var b=this[c].activated,e=null,d=this.inArray(a,b);if(-1!=d)this[c].deactivable&&(e=parseFloat(b.splice(d,1)));else{if(b.length>=this[c].maxActivated||!this[c].maxActivated)e=parseFloat(b.splice(b.length-1,1));b.unshift(a)}return e};
Mg.prototype.initEvents=function(){for(var a=0,c=this.events.length;a<c;a++){var b=this.events[a];thisEvnt=this[b];if(thisEvnt.interactive)for(var e=0,d=this.totalItems;e<d;e++){var f=this.items[e];"click"==b&&this.disableTextSelect(f,!0);f.that=this;f.evnt=b;f.num=thisEvnt.inverse?d-1-e:e;var h=f[this.getEventName(b)];f[this.getEventName(b)]=b;h!=f[this.getEventName(b)]&&this.addEvent(f,b,function(a){var c=this.that.inArray(this.num,this.that[b].activated);this.that.setState(this.num,this[this.that.getEventName(a.type)],
!0,!0,!0,!0,"item");this.that.stopPropagation(a);if(!1===c||-1==c)return this.that.preventDefault(a),!1},!1)}for(var g=["prev","next","first","last"],e=0,d=g.length;e<d;e++)if(f=document.getElementById(this.reference+"-"+b+"-"+g[e]))this.disableTextSelect(f,!0),f.that=this,f.evnt=b,f.call=g[e],h=f[this.getEventName(b)],f[this.getEventName(b)]=b,h!=f[this.getEventName(b)]&&this.addEvent(f,"click",function(a){this.that[this.call](this.evnt,!0,!0,!1)},!1)}};
Mg.prototype.initScrollDrag=function(a){for(var c=0,b=this.events.length;c<b;c++){var e=this.events[c];thisEvnt=this[e];for(var d=["scroll","drag"],f=["In","Out"],h=0,g=d.length;h<g;h++){a||(thisEvnt[d[h]+f[0]+"Div"]=document.getElementById(this.reference+"-"+e+"-"+d[h]+f[0]),thisEvnt[d[h]+f[1]+"Div"]=document.getElementById(this.reference+"-"+e+"-"+d[h]+f[1]));var k=thisEvnt[d[h]+f[0]+"Div"],l=thisEvnt[d[h]+f[1]+"Div"],m=thisEvnt[d[h]+"IsVertical"];if(k&&l){var n=!1,q=!1;"none"==this.getCompStyle(k).display&&
(n=!0,k.style.display="block");"none"==this.getCompStyle(l).display&&(q=!0,l.style.display="block");if(0==h){var r=k.min=l.min=this.scGetMin(e,k,l,m,1),p=k.max=l.max=this.scGetMax(e,k,l,m,1);a?this.scRelease(l):thisEvnt.scrollOnlyTouch||(this.disableTextSelect(k,!0),this.disableTextSelect(l,!0))}else p=m?Math.round(this.totalItems/(k.offsetHeight/l.offsetHeight)):Math.round(this.totalItems/(k.offsetWidth/l.offsetWidth)),0==p&&(p=0.1),k.concurrent=p,r=k.min=l.min=this.scGetMin(e,l,k,m,p),p=k.max=l.max=
this.scGetMax(e,l,k,m,p),a?this.scRelease(k):thisEvnt.dragOnlyTouch||(this.disableTextSelect(k,!0),this.disableTextSelect(l,!1));n&&(k.style.display="none");q&&(l.style.display="none");a||this.addScrollDrag(e,k,l,r,p,m,d[h])}}}};Mg.prototype.refreshScrollDrag=function(){this.initScrollDrag(!0)};
Mg.prototype.checkPrevNext=function(a){a=this[a];var c=a.num-a.prevSteps;a.firstToSteps?c<0-a.multiLess-a.multiPlus?(a.prevIsShown=!1,void 0!=a.prevHide&&a.prevHide()):a.prevIsShown||(a.prevIsShown=!0,void 0!=a.prevShow&&a.prevShow()):0>c?(a.prevIsShown=!1,void 0!=a.prevHide&&a.prevHide()):a.prevIsShown||(a.prevIsShown=!0,void 0!=a.prevShow&&a.prevShow());c=a.num+a.nextSteps;a.lastToSteps?c>this.totalItems-a.multiLess-a.multiPlus-1?(a.nextIsShown=!1,void 0!=a.nextHide&&a.nextHide()):a.nextIsShown||
(a.nextIsShown=!0,void 0!=a.nextShow&&a.nextShow()):c>this.totalItems-1?(a.nextIsShown=!1,void 0!=a.nextHide&&a.nextHide()):a.nextIsShown||(a.nextIsShown=!0,void 0!=a.nextShow&&a.nextShow())};
Mg.prototype.prev=function(a,c,b,e){var d=this[a],f=this.totalItems,h=0;if("centered"!=d.multiMode||!0!=d.cycle)d.lastToSteps&&(f+=d.multiPlus),d.firstToSteps&&(h=-d.multiLess);var g=d.num-d.prevSteps;g<h&&(g=(d.cycle||e)&&d.num==h?f-1:h);void 0==d.prevClick||e||d.prevClick();this.setState(g,a,c,!0,!0,b,e?"automatic":"prev")};
Mg.prototype.next=function(a,c,b,e){var d=this[a],f=this.totalItems,h=0;if("centered"!=d.multiMode||!0!=d.cycle)d.lastToSteps&&d.multiPlus&&(f+=d.multiPlus),d.firstToSteps&&d.multiLess&&(h=-d.multiLess);var g=d.num+d.nextSteps;g>f-1&&(g=(d.cycle||e)&&d.num==f-1?h:f-1);void 0==d.nextClick||e||d.nextClick();this.setState(g,a,c,!0,!0,b,e?"automatic":"next")};Mg.prototype.first=function(a){var c=this[a];void 0!=c.firstClick&&c.firstClick();this.setState(0,a,!0,!0,!0,!0,"first")};
Mg.prototype.last=function(a){var c=this[a];void 0!=c.lastClick&&c.lastClick();this.setState(this.totalItems-1,a,!0,!0,"last")};Mg.prototype.autoStart=function(a){var c=this;clearInterval(window[this.reference+a+"autoInterval"]);window[this.reference+a+"autoInterval"]=this[a].autoInverse?setInterval(function(){c.prev(a,!0,!1,!0);c.onAutoStart(a)},this[a].auto):setInterval(function(){c.next(a,!0,!1,!0);c.onAutoStart(a)},this[a].auto);this.onAutoStart(a)};
Mg.prototype.onAutoStart=function(a){if(void 0!=this[a].onAutoStart)this[a].onAutoStart();a={that:this,evnt:a};for(var c=!1,b=0,e=window.mg_automaticArr.length;b<e;b++){var d=window.mg_automaticArr[b];if(d.that.reference==a.that.reference&&d.evnt==a.evnt){c=!0;break}}c||mg_automaticArr.push(a)};
Mg.prototype.autoSlow=function(a){var c=this;clearInterval(window[this.reference+a+"autoInterval"]);void 0!=this[a].autoSlow&&(window[this.reference+a+"autoInterval"]=this[a].autoInverse?setInterval(function(){c.prev(a,!0,!1,!0);c.autoStart(a)},this[a].autoSlow):setInterval(function(){c.next(a,!0,!1,!0);c.autoStart(a)},this[a].autoSlow),this.onAutoSlow(a))};Mg.prototype.onAutoSlow=function(a){if(void 0!=this[a].onAutoSlow)this[a].onAutoSlow()};
Mg.prototype.autoStop=function(a){clearInterval(window[this.reference+a+"autoInterval"]);for(var c=0,b=window.mg_automaticArr.length;c<b;c++){var e=window.mg_automaticArr[c];if(e.that.reference==this.reference&&e.evnt==a){mg_automaticArr.splice(c,1);break}}};window.mg_automaticArr=[];window.onblur=function(){for(var a=0,c=window.mg_automaticArr.length;a<c;a++){var b=window.mg_automaticArr[a];clearInterval(window[b.that.reference+b.evnt+"autoInterval"])}};
window.onfocus=function(a){a=0;for(var c=window.mg_automaticArr.length;a<c;a++){var b=window.mg_automaticArr[a];b.that.autoStart(b.evnt)}};
Mg.prototype.setMultiple=function(a,c){var b=this[a],e=b.num,d=b.oldNum;if(null!=e||"init"==c){b.multiBeforeIn=[];b.multiBeforeOut=[];b.multiAfterIn=[];b.multiAfterOut=[];b.direction=null;if("centered"==b.multiMode)var f="mapNumCentered",h="nearest",g="normal";else"fixed"==b.multiMode?(f="mapNumFixed",g=h="serie"):"flexible"==b.multiMode&&(f="mapNumFixed",h="normal",g="serie",b.fixedLess=b.multiLess,b.fixedPlus=b.multiPlus);b.multiOldActivated=b.multiActivated;b.multiActivated=this[f](e,b.multiLess,
b.multiPlus,this.totalItems,b.cycle,b.fixedLess,b.fixedPlus,b.firstToSteps,b.lastToSteps);if("init"!=c&&b.multiActivated[0]!=b.multiOldActivated[0]){if("normal"==h)var k=this.findNormalDistance(e,d);else"nearest"==h?k=this.findNearestDistance(e,d,this.totalItems,b.cycle):"serie"==h&&(k=this.findNormalDistance(e,d));if("normal"==g)var l=k;else"serie"==g&&(f=b.fixedLess,h=this.totalItems-1-b.fixedPlus,l=b.multiLess+b.multiPlus+1-b.fixedPlus-b.fixedLess,e<=f&&d>=h||d<=f&&e>=h?l=this.totalItems-b.multiActivated.length:
1<Math.abs(k)&&"flexible"==b.multiMode&&(l+=Math.ceil(Math.abs(k)/2)));this.setOthers(b,e,d,k,l);b.distance=k}}};Mg.prototype.mapNumCentered=function(a,c,b,e,d){var f=[];for(c=-c;c<=b;c++)a+c<e||d?0>a+c&&d?f.push(e-(-a-c)):a+c>=e&&d?f.push(a+c-e):f.push(a+c):f.push(null);return f};Mg.prototype.mapNumFixed=function(a,c,b,e,d,f,h,g,k){d=[];c=c+b+1;var l=Math.floor((a-f)/(c-h-f));b=l*(c-h-f);var m=e-b-f;a<c-h&&!g?b=0*(c-h-f):h>=m&&!k&&(b=(l-h-1+m)*(c-h-f));for(a=0;a<c;a++)b+a<e&&d.push(b+a);return d};
Mg.prototype.setOthers=function(a,c,b,e,d){if(0<e){a.direction=1;c=0;for(b=Math.abs(d);c<b;c++)a.multiAfterIn.unshift(a.multiActivated[a.multiOldActivated.length-c-1]),a.multiBeforeOut.unshift(a.multiOldActivated[d-c-1]);a.multiDeactivated=a.multiBeforeOut}else{c=a.direction=0;for(b=Math.abs(d);c<b;c++)a.multiBeforeIn.push(a.multiActivated[c]),a.multiAfterOut.push(a.multiOldActivated[a.multiOldActivated.length-c-1]);a.multiDeactivated=a.multiAfterOut}};
Mg.prototype.mapDistance=function(a,c){return a-c};Mg.prototype.mapDistanceReverse=function(a,c,b,e){b-=e;return c==a?a:c<b/2?-c:c>b/2?b-c-1:b/2};Mg.prototype.findNormalDistance=function(a,c){return a-c};Mg.prototype.findNearestDistance=function(a,c,b,e){var d=b/2;return!e||a-c<d&&a-c>-d?a-c:a-c>d?c>a?-a-(b-c):-c-(b-a):a-c<-d?c>a?a+(b-c):c+(b-a):0};var mg_startingTitle=document.title,mg_startingUrl=document.location;
"onhashchange"in window&&(window.mg_AnchorEvntsArr=[],window.mg_HashEvntsArr=[],window.onhashchange=function(){for(var a=0,c=window.mg_HashEvntsArr.length;a<c;a++)for(var b=window.mg_HashEvntsArr[a],e=b.obj,d=e.itemsLink,f=0,h=d.length;f<h;f++){var g=window.location.hash,g=g.split("&");if(d[f].href==g[0]){e.setState(f,b.evnt,!0,!0,!0,!0,"anchor");break}}a=0;for(c=window.mg_AnchorEvntsArr.length;a<c;a++)for(var b=window.mg_AnchorEvntsArr[a],e=b.obj,g=window.location.hash.replace("#",""),d=g.split("&"),
f=0,h=d.length;f<h;f++){var g=d[f].split("="),b=g[0].split("|"),k=b[0],b=b[1];if(k==e.reference){f=parseFloat(g[1]);f!=e[b].activated&&e.setState(f,b,!0,!0,!0,!0,"anchor");break}}});
if(window.history&&window.history.pushState){mg_UrlEvntsArr=[];var mg_history=window.history,mg_pushState=window.history.pushState;window.history.pushState=function(a,c,b,e){window.onpushstate({state:a,title:c,url:b},e);return mg_pushState.apply(mg_history,arguments)};var mg_onpushpopstate=function(a,c){a.state||window.history.pushState({title:mg_startingTitle,url:mg_startingUrl},mg_startingTitle,mg_startingUrl);if(!c)for(var b=0,e=window.mg_UrlEvntsArr.length;b<e;b++){var d=window.mg_UrlEvntsArr[b],
f=d.obj,h=a.state.url;arr=f.itemsLink;for(var g=0,k=arr.length;g<k;g++)if(arr[g].href==h)return f.setState(g,d.evnt,!0,!0,!0,!0,"anchor"),f.setDocumentTitle(a.state.title||f.itemsLink[g].title),!0}};window.onpushstate=function(a,c){mg_onpushpopstate(a,c)};window.onpopstate=function(a,c){mg_onpushpopstate(a,c)}}
Mg.prototype.makeAnchor=function(a,c,b){var e=this[c],d=window.location.toString(),f=d.substr(0,d.indexOf("#"));if("useLinkHash"==e.anchorize)if("init"==b)for(a=this.itemsLink,e=0,d=a.length;e<d;e++){if(f=window.location.hash,f=f.split("&"),a[e].href==f[0])return this.setDocumentTitle(a[e].title),e}else f=window.location.hash.replace("#",""),f=f.split("&"),null==a?f.splice(0,1):f[0]=this.itemsLink[a].href,window.location.hash=this.anchorOutput(f,"");else if("useLinkUrl"==e.anchorize)if("init"==b)for(a=
this.itemsLink,e=0,d=a.length;e<d;e++){if(a[e].href==window.location||a[e].href==f)return e}else c=this.itemsLink[a].href,a=this.itemsLink[a].title,window.mg_UrlEvntsArr&&(window.history.pushState({title:a,url:c},a,c,!0),this.setDocumentTitle(a));else if("useAnchor"==e.anchorize){for(var f=window.location.hash.replace("#",""),f=f.split("&"),h,e=0,d=f.length;e<d;e++){var g=f[e].split("=");if(g[0]==this.reference+"|"+c){h=e;break}}if("init"==b){if(void 0!=h)return g[1]}else void 0!=h?null==a?f.splice(h,
1):f[h]=this.reference+"|"+c+"="+a:f.push(this.reference+"|"+c+"="+a),window.location.hash=this.anchorOutput(f,"#")}};Mg.prototype.anchorOutput=function(a,c){for(var b=0,e=a.length;b<e;b++)""!=a[b]&&(c+=a[b],b!=a.length-1&&(c+="&"));return c};Mg.prototype.setDocumentTitle=function(a){document.title=a?a:window.mg_startingTitle};Mg.prototype.registerEvent=function(a,c,b){for(var e=!1,d=0,f=c.length;d<f;d++)if(c[d]==a){a.anchorize!=b&&c.splice(d,1);e=!0;break}a.anchorize!=b||e||c.push(a)};
Mg.prototype.addEvent=function(a,c,b,e){if("undefined"!=typeof a.attachEvent){var d=function(a,b){a=a||window.event;if(!a)for(var c=this.getEvent.caller;c&&(!(a=c.arguments[0])||Event!=a.constructor);)c=c.caller;return a};e=function(c){return b.call(a,d(c,a))};a.detachEvent("on"+c,e);a.attachEvent("on"+c,e)}else{var f=function(b){return function(c){var d=c.relatedTarget,e;if(!(e=this==d))if(this==d)e=!1;else{for(;d&&d!==this;)d=d.parentNode;e=d==this}e||b.call(a,c)}};"mouseenter"==c?(a.removeEventListener("mouseover",
f(b),e),a.addEventListener("mouseover",f(b),e)):"mouseleave"==c?(a.removeEventListener("mouseout",f(b),e),a.addEventListener("mouseout",f(b),e)):(a.removeEventListener(c,b,e),a.addEventListener(c,b,e))}};
Mg.prototype.addScrollDrag=function(a,c,b,e,d,f,h){function g(a){a||(a=window.event);void 0==a&&(a={clientX:this.startPosX,clientY:this.startPosY});void 0==a.clientX&&(a.clientX=a.touches[0].clientX,a.clientY=a.touches[0].clientY);var b=this.mg,d=this.evnt,e=this.scrollDragStr;document.t=this;document.onmousemove=k;document.onmouseup=l;document.ontouchmove=k;document.ontouchend=l;this.style.cursor=b[d][e+"CursorOn"];this.time=+new Date;this.count=0;this.startPosX=a.clientX;this.startPosY=a.clientY;
var f=this.mg.getTransform(this);this.vertical?(this.offsetPos=f?f.top:this.offsetTop,c.swipeDist=this.itemOut.offsetHeight/this.concurrent):(this.offsetPos=f?f.left:this.offsetLeft,c.swipeDist=this.itemOut.offsetWidth/this.concurrent);this.itemIn.instantOffsetPos&&(this.offsetPos=this.itemIn.instantOffsetPos,this.itemIn.instantOffsetPos=null);this.startnum=this.num=this.offsetPos;this.clicked=!0;clearTimeout(b[d]["clickedInterval"+e]);clearTimeout(b[d]["frictionInterval"+e]);a.which&&1!=a.which||
b.scClick(this);this.mg.stopPropagation(a);window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()}function k(a){a||(a=window.event);void 0==a.clientX?(a.clientX=a.touches[0].clientX,a.clientY=a.touches[0].clientY):"ontouchstart"in window&&void 0==a.touches[0].clientX&&(a.clientX=a.clientY=b.lastClient);var b=document.t;if(b.vertical)c=a.clientY-b.startPosY,
d=a.clientX-b.startPosX;else var c=a.clientX-b.startPosX,d=a.clientY-b.startPosY;Math.abs(d)<Math.abs(c)&&10<Math.abs(c)&&(c=b.lastClient=b.offsetPos+c,c=b.mg.scCheckLimits(c,b.isScroll,b.further,b.min,b.max),b.count+=c-b.num,b.count*=b.power,b.num=c,b.mg.scMove(b,c),b.mg.stopPropagation(a),b.mg.preventDefault(a))}function l(a){a||(a=window.event);void 0==a.clientX?(a.clientX=a.changedTouches[0].clientX,a.clientY=a.changedTouches[0].clientY):"ontouchstart"in window&&void 0==a.touches[0].clientX&&
(a.clientX=a.clientY=b.lastClient);var b=document.t,c=b.evnt,d=b.mg,e=b.min,f=b.max,g=b.num;document.onmousemove=null;document.onmouseup=null;document.ontouchmove=null;document.ontouchend=null;b.style.cursor=d[c][b.scrollDragStr+"CursorOff"];if(b.clicked){if(b.vertical)h=a.clientY-b.startPosY,k=a.clientX-b.startPosX;else var h=a.clientX-b.startPosX,k=a.clientY-b.startPosY;if(30<Math.abs(h)){b.onclick=function(){return!1};var l=!1;b.isScroll?g>=e&&g<=f&&(l=!0):Math.abs(h)<b.swipeDist/2&&Math.abs(k)<
Math.abs(h)?(e=Math.abs(f-e)/d.totalItems,g=0>h?g-e:g+e):g<=-e&&g>=-f&&(l=!0);l&&!d[c].disableFriction?m(b,b.friction,g):(d.scMove(b,g,!0),d.scReleaseFraction(b),d.scRelease(b,g));b.mg.stopPropagation(a)}else b.onclick=function(){},d.scReleaseFraction(b),d.scRelease(b,g);d[c]["clickedInterval"+b.scrollDragStr]=setTimeout(function(){b.clicked=!1},113)}}function m(a,b,c){var d=a.evnt,e=a.mg;a.count*=b;var f=a.count;c+=f;a.num=c;!b||-1<f&&1>f?(e.scReleaseFraction(a),e.scRelease(a,c)):(e.scMove(a,c),
c=e.scCheckLimits(c,a.isScroll,0,a.min,a.max),e[d]["frictionInterval"+a.scrollDragStr]=setTimeout(function(){m(a,b,c)},13))}this[a][h+"OnlyTouch"]?(c.ontouchstart=g,c.ontouchend=l):(c.onmousedown=c.ontouchstart=g,c.onmouseup=c.ontouchend=l);c.evnt=a;c.mg=this;c.itemOut=b;c.itemIn=c;c.vertical=f;c.scrollDragStr=h;c.wheelnum=0;c.friction=this[a][h+"Friction"];c.power=this[a][h+"Power"];c.further=this[a][h+"Further"];this[a][h+"OnlyTouch"]||(c.style.cursor=c.mg[a][h+"CursorOff"]);if("scroll"!=h)b.isScroll=
c.isScroll=!1,this[a][h+"Wheel"]&&this.addWheel(c,this.scWheel);else{b.isScroll=c.isScroll=!0;var n=function(a){return(a=a.getBoundingClientRect())?{top:a.top,left:a.left}:{top:0,left:0}};b.onmousedown=b.ontouchstart=function(a){a||(a=window.event);void 0==a.clientX&&(a.clientX=a.touches[0].clientX,a.clientY=a.touches[0].clientY);if(this==this&&!this.itemIn.clicked){var b=this.vertical?a.clientY-n(this).top-this.itemIn.offsetHeight/2:a.clientX-n(this).left-this.itemIn.offsetWidth/2;this.itemIn.startPosX=
a.clientX;this.itemIn.startPosY=a.clientY;b=this.mg.scCheckLimits(b,this.isScroll,0,this.min,this.max);this.itemIn.instantOffsetPos=b;this.mg.scReleaseSet(this,b);if("touchstart"==a.type)this.itemIn.ontouchstart();else this.itemIn.onmousedown()}return!1};b.evnt=a;b.mg=this;b.itemIn=c;b.itemOut=b;b.vertical=f;b.scrollDragStr=h;b.wheelnum=0;this[a][h+"Wheel"]&&this.addWheel(b,this.scWheel)}b.ondragstart=c.ondragstart=function(a){return!1}};
Mg.prototype.scClick=function(a){var c=a.evnt,b=a.itemIn;a=a.scrollDragStr;this[c].startPosX=b.startPosX;this[c].startPosY=b.startPosY;if(void 0!=this[c][a+"Click"])this[c][a+"Click"]()};
Mg.prototype.scMove=function(a,c,b,e){var d=a.evnt,f=a.scrollDragStr,h=a.isScroll,g=a.min,k=a.max,l=this[d][f+"Fraction"],m=this[d].rounding;this[d][f+"Dragged"]=a.startnum-c;this[d][f+"Position"]=c;if(!e){h||(k=-k,g=-g);var n=(this[d][f+"Invert"]?k-c-g:c-g)/(k-g)*(this.totalItems-1);c=Math[m](n)}if(c!=this[d].num||l)0<=c&&c<=this.totalItems-1?(a=l?"fraction":f,this[d].fraction=this.calculateFraction(n,m),this.setState(c,d,!0,!h,h,!0,a)):this[d].cycle&&(c=0>c?this.totalItems+c:c-this.totalItems,this.setState(c,
d,!0,!h,h,!0,f));if(!b&&void 0!=this[d][f+"Move"])this[d][f+"Move"]()};Mg.prototype.scReleaseSet=function(a,c){var b=a.evnt,e=a.scrollDragStr,d=a.min,f=a.max,h=this[b].rounding;this[b][e+"Invert"]&&(c=f-c);d=Math[h](c/(f-d)*(this.totalItems-1));this.setState(d,b,!0,!1,!0,!0,e);this.scRelease(a,c)};
Mg.prototype.scRelease=function(a,c){var b=a.evnt,e=a.itemIn,d=a.itemOut,f=a.scrollDragStr,h=a.isScroll,g=a.min,k=a.max,l=this.totalItems-1;void 0!=c&&(e.wheelnum=d.wheelnum=c,this[b][f+"Dragged"]=a.startnum-c);h||(k=-k,g=-g);e=(k-g)/l*this[b].activated||0;this[b][f+"Position"]=this[b][f+"Invert"]?k-e:g+e;if(void 0!=c){if(void 0!=this[b][f+"Release"])this[b][f+"Release"]()}else if(void 0!=this[b][f+"Move"])this[b][f+"Move"]()};
Mg.prototype.scReleaseFraction=function(a){var c=a.evnt,b=a.scrollDragStr;this[c][b+"Fraction"]&&this.setState(this[c].activated,c,!0,!a.isScroll,a.isScroll,!0,b)};Mg.prototype.scCheckLimits=function(a,c,b,e,d){c?a<e?a=e+(a-e)*b:a>d&&(a=d+(a-d)*b):a>-e?a=-e+(a+e)*b:a<-d&&(a=-d+(a+d)*b);return a};Mg.prototype.scGetMin=function(a,c,b,e,d){this[a].firstToSteps||(d=1);return e?-c.offsetHeight*(d-1)/d:-c.offsetWidth*(d-1)/d};
Mg.prototype.scGetMax=function(a,c,b,e,d){this[a].lastToSteps||(d=1);return e?b.offsetHeight-c.offsetHeight/d:b.offsetWidth-c.offsetWidth/d};Mg.prototype.addWheel=function(a,c){var b=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";"undefined"==typeof a.attachEvent&&a.addEventListener(b,c,!1)};
Mg.prototype.scWheel=function(a){var c=this.mg,b=0;a.wheelDelta?b=a.wheelDelta/120:a.detail&&(b=-a.detail/3);b=this.wheelnum-b;0<=b&&b<=c.totalItems-1&&(c.scMove(this,b,!0,!0),c.scReleaseFraction(this),c.scRelease(this,c[this.evnt].activated),c.stopPropagation(a),c.preventDefault(a))};Mg.prototype.calculateFraction=function(a,c){var b=a%1;"round"==c?(b-=0.5,0>b&&(b+=1)):"ceil"==c&&(b+=1,1<b&&(b-=1));return b};
Mg.prototype.getTransform=function(a){for(var c="transform msTransform MozTransform WebkitTransform OTransform KhtmlTransform".split(" "),b=0,e=c.length;b<e;b++)if(a.style[c[b]])return a=this.getCompStyle(a)[c[b]],c=a.replace(/[^0-9\-.,]/g,"").split(","),b={},b.left=0==a.indexOf("matrix3d")?1*c[12]:1*c[4],b.top=0==a.indexOf("matrix3d")?1*c[13]:1*c[5],b};Mg.prototype.getCompStyle=function(a){return window.getComputedStyle?window.getComputedStyle(a,""):a.currentStyle};
Mg.prototype.getEventName=function(a){return"mouseenter"==a?"mouseover":"mouseleave"==a?"mouseout":a};Mg.prototype.inArray=function(a,c){if(!c)return-1;for(var b=0,e=c.length;b<e;b++)if(c[b]==a)return b;return-1};Mg.prototype.getElementsById=function(a){for(var c=document.body.getElementsByTagName("*"),b=[],e,d=0,f=c.length;d<f;d++)e=c[d],e.id.substr(0,a.length)==a&&b.push(e);return b};Mg.prototype.stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0};
Mg.prototype.preventDefault=function(a){a.preventDefault&&a.preventDefault()};
Mg.prototype.enableTextSelect=function(a,c){a&&(c&&(a.style.cursor="auto"),a.that=this,a.unselectable=!1,a.style.userSelect="text",a.style.OUserSelect="text",a.style.msUserSelect="text",a.style.MozUserSelect="text",a.style.webkitUserSelect="text",a.onselectstart=function(a){a=a||window.event;this.that.stopPropagation(a)},a.onmousedown=function(a){a=a||window.event;this.that.stopPropagation(a)},navigator.userAgent.match(/Android/i)&&(a.style.webkitTapHighlightColor="default"))};
Mg.prototype.disableTextSelect=function(a,c){a&&(c&&(a.style.cursor="pointer"),a.unselectable=!0,a.style.userSelect="none",a.style.OUserSelect="none",a.style.msUserSelect="none",a.style.MozUserSelect="none",a.style.webkitUserSelect="none",a.onselectstart=function(a){return!1},a.onmousedown=function(a){return!1},navigator.userAgent.match(/Android/i)&&(a.style.webkitTapHighlightColor="rgba(0,0,0,0)"))};